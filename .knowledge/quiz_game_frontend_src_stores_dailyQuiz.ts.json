{"is_source_file": true, "format": "TypeScript", "description": "This file defines a Pinia store for managing daily quiz sessions in a Vue.js frontend application. It includes types for daily quiz metadata, persistent storage, and session schema, as well as functions for loading, saving, and manipulating quiz data, questions, user answers, lifelines, and streak/reward calculations.", "external_files": ["@/stores/quiz", "@/utils/pools"], "external_methods": ["import { defineStore } from 'pinia'", "import { ref, computed } from 'vue'", "import type { QuizQuestion, CategoryKey } from '@/stores/quiz'", "import pools from '@/utils/pools'"], "published": ["useDailyQuizStore"], "classes": [], "methods": [{"name": "async function prepareToday(category: CategoryKey | null = null, count = 10) { prepareToday", "description": "Initializes today's quiz session, determines questions deterministically based on seed, and resets session state.", "scope": "", "scopeKind": ""}, {"name": "async function resumeIfAvailable(): Promise<boolean> { resumeIfAvailable", "description": "Resumes a saved daily quiz session if available and still valid for today.", "scope": "", "scopeKind": ""}, {"name": "function completeAndRecordScore(addScore: (entry: { player?: string | null; score: number; tot/ completeAndRecordScore", "description": "Finalizes the quiz session, updates streaks and rewards, and logs the score.", "scope": "", "scopeKind": ""}, {"name": "function getPersistentOverview(): DailyMeta { getPersistentOverview", "description": "Returns an overview of persistent quiz data such as streaks and rewards.", "scope": "", "scopeKind": ""}, {"name": "function buildSeed(dateKey: string, category: CategoryKey | null): string { buildSeed", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "function buildSession(): DailySessionSchema | null { buildSession", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "function calcStreakOnCompletion(dateKey: string, lastCompleted: string | null): number { calcStreakOnCompletion", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "function clearSession(): void { clearSession", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "function getTodayKey(): string { getTodayKey", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "function hasSavedDaily(): boolean { hasSavedDaily", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "function makeRng(seed: number) { makeRng", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "function nextQuestion(): boolean { nextQuestion", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "function persistSession() { persistSession", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "function pickDeterministic<T>(arr: T[], n: number, rng: () => number): T[] { pickDeterministic", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "function readSession(): DailySessionSchema | null { readSession", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "function rewardsForStreak(streak: number): string[] { rewardsForStreak", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "function seededHash(str: string): number { seededHash", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "function selectOption(index: number) { selectOption", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "function submitAnswer(): { correct: boolean } { submitAnswer", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "function useAskHint(): { ok: boolean; hint?: string } { useAskHint", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "function useFiftyFifty(): { ok: boolean; hidden: number[] } { useFiftyFifty", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "function useSkipQuestion(): { ok: boolean } { useSkipQuestion", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "function writePersist(p: DailyPersistent) { writePersist", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "function writeSession(s: DailySessionSchema | null) { writeSession", "scope": "", "scopeKind": "", "description": "unavailable"}], "calls": ["localStorage.getItem", "localStorage.setItem", "localStorage.removeItem", "pickDeterministic", "buildSeed", "getTodayKey", "readPersist", "writePersist", "readSession", "writeSession", "completeAndRecordScore", "prepareToday", "resumeIfAvailable", "clearSession"], "search-terms": ["Pinia store", "daily quiz", "deterministic question selection", "streak management", "rewards system", "localStorage persistence", "vue composables"], "state": 2, "file_id": 23, "knowledge_revision": 80, "git_revision": "bbb0b61393d84ac73b04db2bb530fd274b4998f3", "ctags": [{"_type": "tag", "name": "$", "path": "/home/kavia/workspace/code-generation/quizmaster-web-220267-220276/quiz_game_frontend/src/stores/dailyQuiz.ts", "pattern": "/^    const yKey = `${y.getFullYear()}-${`${y.getMonth() + 1}`.padStart(2, '0')}-${`${y.getDate()}/", "language": "TypeScript", "kind": "constant", "scope": "calcStreakOnCompletion", "scopeKind": "function"}, {"_type": "tag", "name": "DAILY_META_KEY", "path": "/home/kavia/workspace/code-generation/quizmaster-web-220267-220276/quiz_game_frontend/src/stores/dailyQuiz.ts", "pattern": "/^const DAILY_META_KEY = 'quizmaster:daily:meta' \\/\\/ persistent meta (last dates, streak)$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "DAILY_PERSIST_VERSION", "path": "/home/kavia/workspace/code-generation/quizmaster-web-220267-220276/quiz_game_frontend/src/stores/dailyQuiz.ts", "pattern": "/^const DAILY_PERSIST_VERSION = 2$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "DAILY_SESSION_KEY", "path": "/home/kavia/workspace/code-generation/quizmaster-web-220267-220276/quiz_game_frontend/src/stores/dailyQuiz.ts", "pattern": "/^const DAILY_SESSION_KEY = 'quizmaster:daily:session' \\/\\/ in-progress daily attempt$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "DAILY_SESSION_VERSION", "path": "/home/kavia/workspace/code-generation/quizmaster-web-220267-220276/quiz_game_frontend/src/stores/dailyQuiz.ts", "pattern": "/^const DAILY_SESSION_VERSION = 2$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "DailyMeta", "path": "/home/kavia/workspace/code-generation/quizmaster-web-220267-220276/quiz_game_frontend/src/stores/dailyQuiz.ts", "pattern": "/^type DailyMeta = {$/", "language": "TypeScript", "kind": "alias"}, {"_type": "tag", "name": "DailyPersistent", "path": "/home/kavia/workspace/code-generation/quizmaster-web-220267-220276/quiz_game_frontend/src/stores/dailyQuiz.ts", "pattern": "/^type DailyPersistent = {$/", "language": "TypeScript", "kind": "alias"}, {"_type": "tag", "name": "DailySessionSchema", "path": "/home/kavia/workspace/code-generation/quizmaster-web-220267-220276/quiz_game_frontend/src/stores/dailyQuiz.ts", "pattern": "/^type DailySessionSchema = {$/", "language": "TypeScript", "kind": "alias"}, {"_type": "tag", "name": "ScoreboardDailyMeta", "path": "/home/kavia/workspace/code-generation/quizmaster-web-220267-220276/quiz_game_frontend/src/stores/dailyQuiz.ts", "pattern": "/^type ScoreboardDailyMeta = {$/", "language": "TypeScript", "kind": "alias"}, {"_type": "tag", "name": "addScore", "path": "/home/kavia/workspace/code-generation/quizmaster-web-220267-220276/quiz_game_frontend/src/stores/dailyQuiz.ts", "pattern": "/^    addScore({$/", "language": "TypeScript", "kind": "constant", "scope": "completeAndRecordScore", "scopeKind": "function"}, {"_type": "tag", "name": "all", "path": "/home/kavia/workspace/code-generation/quizmaster-web-220267-220276/quiz_game_frontend/src/stores/dailyQuiz.ts", "pattern": "/^          const all: QuizQuestion[] = Object.values(pools).flat()$/", "language": "TypeScript", "kind": "constant", "scope": "prepareToday", "scopeKind": "function"}, {"_type": "tag", "name": "buildSeed", "path": "/home/kavia/workspace/code-generation/quizmaster-web-220267-220276/quiz_game_frontend/src/stores/dailyQuiz.ts", "pattern": "/^  function buildSeed(dateKey: string, category: CategoryKey | null): string {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "buildSession", "path": "/home/kavia/workspace/code-generation/quizmaster-web-220267-220276/quiz_game_frontend/src/stores/dailyQuiz.ts", "pattern": "/^  function buildSession(): DailySessionSchema | null {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "calcStreakOnCompletion", "path": "/home/kavia/workspace/code-generation/quizmaster-web-220267-220276/quiz_game_frontend/src/stores/dailyQuiz.ts", "pattern": "/^  function calcStreakOnCompletion(dateKey: string, lastCompleted: string | null): number {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "catLabelMap", "path": "/home/kavia/workspace/code-generation/quizmaster-web-220267-220276/quiz_game_frontend/src/stores/dailyQuiz.ts", "pattern": "/^    const catLabelMap: Record<string, string> = {$/", "language": "TypeScript", "kind": "constant", "scope": "completeAndRecordScore", "scopeKind": "function"}, {"_type": "tag", "name": "clearSession", "path": "/home/kavia/workspace/code-generation/quizmaster-web-220267-220276/quiz_game_frontend/src/stores/dailyQuiz.ts", "pattern": "/^  function clearSession(): void {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "completeAndRecordScore", "path": "/home/kavia/workspace/code-generation/quizmaster-web-220267-220276/quiz_game_frontend/src/stores/dailyQuiz.ts", "pattern": "/^  function completeAndRecordScore(addScore: (entry: { player?: string | null; score: number; tot/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "correct", "path": "/home/kavia/workspace/code-generation/quizmaster-web-220267-220276/quiz_game_frontend/src/stores/dailyQuiz.ts", "pattern": "/^    const correct = selectedIndex.value === current.value.answerIndex$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "cur", "path": "/home/kavia/workspace/code-generation/quizmaster-web-220267-220276/quiz_game_frontend/src/stores/dailyQuiz.ts", "pattern": "/^    const cur = current.value$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "d", "path": "/home/kavia/workspace/code-generation/quizmaster-web-220267-220276/quiz_game_frontend/src/stores/dailyQuiz.ts", "pattern": "/^    const d = new Date(dateKey + 'T00:00:00')$/", "language": "TypeScript", "kind": "constant", "scope": "calcStreakOnCompletion", "scopeKind": "function"}, {"_type": "tag", "name": "d", "path": "/home/kavia/workspace/code-generation/quizmaster-web-220267-220276/quiz_game_frontend/src/stores/dailyQuiz.ts", "pattern": "/^  const d = new Date()$/", "language": "TypeScript", "kind": "constant", "scope": "getTodayKey", "scopeKind": "function"}, {"_type": "tag", "name": "day", "path": "/home/kavia/workspace/code-generation/quizmaster-web-220267-220276/quiz_game_frontend/src/stores/dailyQuiz.ts", "pattern": "/^  const day = `${d.getDate()}`.padStart(2, '0')$/", "language": "TypeScript", "kind": "constant", "scope": "getTodayKey", "scopeKind": "function"}, {"_type": "tag", "name": "getPersistentOverview", "path": "/home/kavia/workspace/code-generation/quizmaster-web-220267-220276/quiz_game_frontend/src/stores/dailyQuiz.ts", "pattern": "/^  function getPersistentOverview(): DailyMeta {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "getTodayKey", "path": "/home/kavia/workspace/code-generation/quizmaster-web-220267-220276/quiz_game_frontend/src/stores/dailyQuiz.ts", "pattern": "/^function getTodayKey(): string {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "hasSavedDaily", "path": "/home/kavia/workspace/code-generation/quizmaster-web-220267-220276/quiz_game_frontend/src/stores/dailyQuiz.ts", "pattern": "/^  function hasSavedDaily(): boolean {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "hidden", "path": "/home/kavia/workspace/code-generation/quizmaster-web-220267-220276/quiz_game_frontend/src/stores/dailyQuiz.ts", "pattern": "/^    const hidden = shuffled.slice(0, Math.min(2, pool.length))$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "indices", "path": "/home/kavia/workspace/code-generation/quizmaster-web-220267-220276/quiz_game_frontend/src/stores/dailyQuiz.ts", "pattern": "/^  const indices = arr.map((_, i) => i)$/", "language": "TypeScript", "kind": "constant", "scope": "pickDeterministic", "scopeKind": "function"}, {"_type": "tag", "name": "j", "path": "/home/kavia/workspace/code-generation/quizmaster-web-220267-220276/quiz_game_frontend/src/stores/dailyQuiz.ts", "pattern": "/^    const j = Math.floor(rng() * (i + 1))$/", "language": "TypeScript", "kind": "constant", "scope": "pickDeterministic", "scopeKind": "function"}, {"_type": "tag", "name": "lastCompletedDate", "path": "/home/kavia/workspace/code-generation/quizmaster-web-220267-220276/quiz_game_frontend/src/stores/dailyQuiz.ts", "pattern": "/^      const lastCompletedDate = typeof obj.lastCompletedDate === 'string' ? obj.lastCompletedDat/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "lastPlayedDate", "path": "/home/kavia/workspace/code-generation/quizmaster-web-220267-220276/quiz_game_frontend/src/stores/dailyQuiz.ts", "pattern": "/^      const lastPlayedDate = typeof obj.lastPlayedDate === 'string' ? obj.lastPlayedDate : (obj./", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "m", "path": "/home/kavia/workspace/code-generation/quizmaster-web-220267-220276/quiz_game_frontend/src/stores/dailyQuiz.ts", "pattern": "/^  const m = `${d.getMonth() + 1}`.padStart(2, '0')$/", "language": "TypeScript", "kind": "constant", "scope": "getTodayKey", "scopeKind": "function"}, {"_type": "tag", "name": "makeRng", "path": "/home/kavia/workspace/code-generation/quizmaster-web-220267-220276/quiz_game_frontend/src/stores/dailyQuiz.ts", "pattern": "/^function makeRng(seed: number) {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "meta", "path": "/home/kavia/workspace/code-generation/quizmaster-web-220267-220276/quiz_game_frontend/src/stores/dailyQuiz.ts", "pattern": "/^      const meta = readPersist()$/", "language": "TypeScript", "kind": "constant", "scope": "prepareToday", "scopeKind": "function"}, {"_type": "tag", "name": "meta", "path": "/home/kavia/workspace/code-generation/quizmaster-web-220267-220276/quiz_game_frontend/src/stores/dailyQuiz.ts", "pattern": "/^    const meta = readPersist()$/", "language": "TypeScript", "kind": "constant", "scope": "completeAndRecordScore", "scopeKind": "function"}, {"_type": "tag", "name": "metaRecord", "path": "/home/kavia/workspace/code-generation/quizmaster-web-220267-220276/quiz_game_frontend/src/stores/dailyQuiz.ts", "pattern": "/^    const metaRecord: ScoreboardDailyMeta = {$/", "language": "TypeScript", "kind": "constant", "scope": "completeAndRecordScore", "scopeKind": "function"}, {"_type": "tag", "name": "newStreak", "path": "/home/kavia/workspace/code-generation/quizmaster-web-220267-220276/quiz_game_frontend/src/stores/dailyQuiz.ts", "pattern": "/^    const newStreak = calcStreakOnCompletion(today, meta.lastCompletedDate)$/", "language": "TypeScript", "kind": "constant", "scope": "completeAndRecordScore", "scopeKind": "function"}, {"_type": "tag", "name": "nextQuestion", "path": "/home/kavia/workspace/code-generation/quizmaster-web-220267-220276/quiz_game_frontend/src/stores/dailyQuiz.ts", "pattern": "/^  function nextQuestion(): boolean {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "obj", "path": "/home/kavia/workspace/code-generation/quizmaster-web-220267-220276/quiz_game_frontend/src/stores/dailyQuiz.ts", "pattern": "/^      const lastCompletedDate = typeof obj.lastCompletedDate === 'string' ? obj.lastCompletedDat/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "obj", "path": "/home/kavia/workspace/code-generation/quizmaster-web-220267-220276/quiz_game_frontend/src/stores/dailyQuiz.ts", "pattern": "/^      const lastPlayedDate = typeof obj.lastPlayedDate === 'string' ? obj.lastPlayedDate : (obj./", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "obj", "path": "/home/kavia/workspace/code-generation/quizmaster-web-220267-220276/quiz_game_frontend/src/stores/dailyQuiz.ts", "pattern": "/^      const obj = JSON.parse(raw) as Partial<DailyPersistent>$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "obj", "path": "/home/kavia/workspace/code-generation/quizmaster-web-220267-220276/quiz_game_frontend/src/stores/dailyQuiz.ts", "pattern": "/^      const obj = JSON.parse(raw) as Partial<DailySessionSchema>$/", "language": "TypeScript", "kind": "constant", "scope": "readSession", "scopeKind": "function"}, {"_type": "tag", "name": "obj", "path": "/home/kavia/workspace/code-generation/quizmaster-web-220267-220276/quiz_game_frontend/src/stores/dailyQuiz.ts", "pattern": "/^      const streak = typeof obj.streakCount === 'number' ? obj.streakCount : 0$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "offline", "path": "/home/kavia/workspace/code-generation/quizmaster-web-220267-220276/quiz_game_frontend/src/stores/dailyQuiz.ts", "pattern": "/^        const offline = useOfflineStore()$/", "language": "TypeScript", "kind": "constant", "scope": "prepareToday", "scopeKind": "function"}, {"_type": "tag", "name": "p", "path": "/home/kavia/workspace/code-generation/quizmaster-web-220267-220276/quiz_game_frontend/src/stores/dailyQuiz.ts", "pattern": "/^    const p = readPersist()$/", "language": "TypeScript", "kind": "constant", "scope": "getPersistentOverview", "scopeKind": "function"}, {"_type": "tag", "name": "persistSession", "path": "/home/kavia/workspace/code-generation/quizmaster-web-220267-220276/quiz_game_frontend/src/stores/dailyQuiz.ts", "pattern": "/^  function persistSession() {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "pickDeterministic", "path": "/home/kavia/workspace/code-generation/quizmaster-web-220267-220276/quiz_game_frontend/src/stores/dailyQuiz.ts", "pattern": "/^function pickDeterministic<T>(arr: T[], n: number, rng: () => number): T[] {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "pool", "path": "/home/kavia/workspace/code-generation/quizmaster-web-220267-220276/quiz_game_frontend/src/stores/dailyQuiz.ts", "pattern": "/^    const pool = wrongs$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "prepareToday", "path": "/home/kavia/workspace/code-generation/quizmaster-web-220267-220276/quiz_game_frontend/src/stores/dailyQuiz.ts", "pattern": "/^  async function prepareToday(category: CategoryKey | null = null, count = 10) {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "qid", "path": "/home/kavia/workspace/code-generation/quizmaster-web-220267-220276/quiz_game_frontend/src/stores/dailyQuiz.ts", "pattern": "/^    const qid = cur.id$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "qid", "path": "/home/kavia/workspace/code-generation/quizmaster-web-220267-220276/quiz_game_frontend/src/stores/dailyQuiz.ts", "pattern": "/^    const qid = current.value.id$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "r", "path": "/home/kavia/workspace/code-generation/quizmaster-web-220267-220276/quiz_game_frontend/src/stores/dailyQuiz.ts", "pattern": "/^    const r: string[] = []$/", "language": "TypeScript", "kind": "constant", "scope": "rewardsForStreak", "scopeKind": "function"}, {"_type": "tag", "name": "raw", "path": "/home/kavia/workspace/code-generation/quizmaster-web-220267-220276/quiz_game_frontend/src/stores/dailyQuiz.ts", "pattern": "/^      const raw = localStorage.getItem(DAILY_SESSION_KEY)$/", "language": "TypeScript", "kind": "constant", "scope": "readSession", "scopeKind": "function"}, {"_type": "tag", "name": "readSession", "path": "/home/kavia/workspace/code-generation/quizmaster-web-220267-220276/quiz_game_frontend/src/stores/dailyQuiz.ts", "pattern": "/^  function readSession(): DailySessionSchema | null {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "resumeIfAvailable", "path": "/home/kavia/workspace/code-generation/quizmaster-web-220267-220276/quiz_game_frontend/src/stores/dailyQuiz.ts", "pattern": "/^  async function resumeIfAvailable(): Promise<boolean> {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "rewards", "path": "/home/kavia/workspace/code-generation/quizmaster-web-220267-220276/quiz_game_frontend/src/stores/dailyQuiz.ts", "pattern": "/^      rewards: unlocked,$/", "language": "TypeScript", "kind": "constant", "scope": "completeAndRecordScore", "scopeKind": "function"}, {"_type": "tag", "name": "rewardsForStreak", "path": "/home/kavia/workspace/code-generation/quizmaster-web-220267-220276/quiz_game_frontend/src/stores/dailyQuiz.ts", "pattern": "/^  function rewardsForStreak(streak: number): string[] {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "rewardsHistory", "path": "/home/kavia/workspace/code-generation/quizmaster-web-220267-220276/quiz_game_frontend/src/stores/dailyQuiz.ts", "pattern": "/^      const rewardsHistory = Array.isArray(obj.rewardsHistory) ? obj.rewardsHistory.map(String) /", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "rng", "path": "/home/kavia/workspace/code-generation/quizmaster-web-220267-220276/quiz_game_frontend/src/stores/dailyQuiz.ts", "pattern": "/^      const rng = makeRng(seedNum)$/", "language": "TypeScript", "kind": "constant", "scope": "prepareToday", "scopeKind": "function"}, {"_type": "tag", "name": "rng", "path": "/home/kavia/workspace/code-generation/quizmaster-web-220267-220276/quiz_game_frontend/src/stores/dailyQuiz.ts", "pattern": "/^    const rng = makeRng(seededHash(`${dailySeed.value}:${qid}`))$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "s", "path": "/home/kavia/workspace/code-generation/quizmaster-web-220267-220276/quiz_game_frontend/src/stores/dailyQuiz.ts", "pattern": "/^    const s = buildSession()$/", "language": "TypeScript", "kind": "constant", "scope": "persistSession", "scopeKind": "function"}, {"_type": "tag", "name": "s", "path": "/home/kavia/workspace/code-generation/quizmaster-web-220267-220276/quiz_game_frontend/src/stores/dailyQuiz.ts", "pattern": "/^    const s = readSession()$/", "language": "TypeScript", "kind": "constant", "scope": "hasSavedDaily", "scopeKind": "function"}, {"_type": "tag", "name": "s", "path": "/home/kavia/workspace/code-generation/quizmaster-web-220267-220276/quiz_game_frontend/src/stores/dailyQuiz.ts", "pattern": "/^    const s = readSession()$/", "language": "TypeScript", "kind": "constant", "scope": "resumeIfAvailable", "scopeKind": "function"}, {"_type": "tag", "name": "seedNum", "path": "/home/kavia/workspace/code-generation/quizmaster-web-220267-220276/quiz_game_frontend/src/stores/dailyQuiz.ts", "pattern": "/^      const seedNum = seededHash(dailySeed.value)$/", "language": "TypeScript", "kind": "constant", "scope": "prepareToday", "scopeKind": "function"}, {"_type": "tag", "name": "seededHash", "path": "/home/kavia/workspace/code-generation/quizmaster-web-220267-220276/quiz_game_frontend/src/stores/dailyQuiz.ts", "pattern": "/^function seededHash(str: string): number {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "selectOption", "path": "/home/kavia/workspace/code-generation/quizmaster-web-220267-220276/quiz_game_frontend/src/stores/dailyQuiz.ts", "pattern": "/^  function selectOption(index: number) {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "set", "path": "/home/kavia/workspace/code-generation/quizmaster-web-220267-220276/quiz_game_frontend/src/stores/dailyQuiz.ts", "pattern": "/^      const set = pickDeterministic(source, count, rng)$/", "language": "TypeScript", "kind": "constant", "scope": "prepareToday", "scopeKind": "function"}, {"_type": "tag", "name": "shuffled", "path": "/home/kavia/workspace/code-generation/quizmaster-web-220267-220276/quiz_game_frontend/src/stores/dailyQuiz.ts", "pattern": "/^    const shuffled = [...pool].sort(() => rng() - 0.5)$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "slice", "path": "/home/kavia/workspace/code-generation/quizmaster-web-220267-220276/quiz_game_frontend/src/stores/dailyQuiz.ts", "pattern": "/^  const slice = indices.slice(0, Math.min(n, indices.length))$/", "language": "TypeScript", "kind": "constant", "scope": "pickDeterministic", "scopeKind": "function"}, {"_type": "tag", "name": "streak", "path": "/home/kavia/workspace/code-generation/quizmaster-web-220267-220276/quiz_game_frontend/src/stores/dailyQuiz.ts", "pattern": "/^      const streak = typeof obj.streakCount === 'number' ? obj.streakCount : 0$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "streakAtCompletion", "path": "/home/kavia/workspace/code-generation/quizmaster-web-220267-220276/quiz_game_frontend/src/stores/dailyQuiz.ts", "pattern": "/^      streakAtCompletion: newStreak,$/", "language": "TypeScript", "kind": "constant", "scope": "completeAndRecordScore", "scopeKind": "function"}, {"_type": "tag", "name": "submitAnswer", "path": "/home/kavia/workspace/code-generation/quizmaster-web-220267-220276/quiz_game_frontend/src/stores/dailyQuiz.ts", "pattern": "/^  function submitAnswer(): { correct: boolean } {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "today", "path": "/home/kavia/workspace/code-generation/quizmaster-web-220267-220276/quiz_game_frontend/src/stores/dailyQuiz.ts", "pattern": "/^      const today = getTodayKey()$/", "language": "TypeScript", "kind": "constant", "scope": "prepareToday", "scopeKind": "function"}, {"_type": "tag", "name": "today", "path": "/home/kavia/workspace/code-generation/quizmaster-web-220267-220276/quiz_game_frontend/src/stores/dailyQuiz.ts", "pattern": "/^    const today = dailyDate.value$/", "language": "TypeScript", "kind": "constant", "scope": "completeAndRecordScore", "scopeKind": "function"}, {"_type": "tag", "name": "unlocked", "path": "/home/kavia/workspace/code-generation/quizmaster-web-220267-220276/quiz_game_frontend/src/stores/dailyQuiz.ts", "pattern": "/^    const unlocked = rewardsForStreak(newStreak)$/", "language": "TypeScript", "kind": "constant", "scope": "completeAndRecordScore", "scopeKind": "function"}, {"_type": "tag", "name": "useAskHint", "path": "/home/kavia/workspace/code-generation/quizmaster-web-220267-220276/quiz_game_frontend/src/stores/dailyQuiz.ts", "pattern": "/^  function useAskHint(): { ok: boolean; hint?: string } {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "useDailyQuizStore", "path": "/home/kavia/workspace/code-generation/quizmaster-web-220267-220276/quiz_game_frontend/src/stores/dailyQuiz.ts", "pattern": "/^export const useDailyQuizStore = defineStore('dailyQuiz', () => {$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "useFiftyFifty", "path": "/home/kavia/workspace/code-generation/quizmaster-web-220267-220276/quiz_game_frontend/src/stores/dailyQuiz.ts", "pattern": "/^  function useFiftyFifty(): { ok: boolean; hidden: number[] } {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "useOfflineStore", "path": "/home/kavia/workspace/code-generation/quizmaster-web-220267-220276/quiz_game_frontend/src/stores/dailyQuiz.ts", "pattern": "/^        const { useOfflineStore } = await import('.\\/offline')$/", "language": "TypeScript", "kind": "constant", "scope": "prepareToday", "scopeKind": "function"}, {"_type": "tag", "name": "useSkipQuestion", "path": "/home/kavia/workspace/code-generation/quizmaster-web-220267-220276/quiz_game_frontend/src/stores/dailyQuiz.ts", "pattern": "/^  function useSkipQuestion(): { ok: boolean } {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "writePersist", "path": "/home/kavia/workspace/code-generation/quizmaster-web-220267-220276/quiz_game_frontend/src/stores/dailyQuiz.ts", "pattern": "/^  function writePersist(p: DailyPersistent) {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "writeSession", "path": "/home/kavia/workspace/code-generation/quizmaster-web-220267-220276/quiz_game_frontend/src/stores/dailyQuiz.ts", "pattern": "/^  function writeSession(s: DailySessionSchema | null) {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "wrongs", "path": "/home/kavia/workspace/code-generation/quizmaster-web-220267-220276/quiz_game_frontend/src/stores/dailyQuiz.ts", "pattern": "/^    const wrongs = cur.options.map((_, i) => i).filter((i) => i !== cur.answerIndex)$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "y", "path": "/home/kavia/workspace/code-generation/quizmaster-web-220267-220276/quiz_game_frontend/src/stores/dailyQuiz.ts", "pattern": "/^    const y = new Date(d)$/", "language": "TypeScript", "kind": "constant", "scope": "calcStreakOnCompletion", "scopeKind": "function"}, {"_type": "tag", "name": "y", "path": "/home/kavia/workspace/code-generation/quizmaster-web-220267-220276/quiz_game_frontend/src/stores/dailyQuiz.ts", "pattern": "/^    const yKey = `${y.getFullYear()}-${`${y.getMonth() + 1}`.padStart(2, '0')}-${`${y.getDate()}/", "language": "TypeScript", "kind": "constant", "scope": "calcStreakOnCompletion", "scopeKind": "function"}, {"_type": "tag", "name": "y", "path": "/home/kavia/workspace/code-generation/quizmaster-web-220267-220276/quiz_game_frontend/src/stores/dailyQuiz.ts", "pattern": "/^  const y = d.getFullYear()$/", "language": "TypeScript", "kind": "constant", "scope": "getTodayKey", "scopeKind": "function"}, {"_type": "tag", "name": "yKey", "path": "/home/kavia/workspace/code-generation/quizmaster-web-220267-220276/quiz_game_frontend/src/stores/dailyQuiz.ts", "pattern": "/^    const yKey = `${y.getFullYear()}-${`${y.getMonth() + 1}`.padStart(2, '0')}-${`${y.getDate()}/", "language": "TypeScript", "kind": "constant", "scope": "calcStreakOnCompletion", "scopeKind": "function"}], "hash": "b113a664216803bf70657153c8ed96ff", "format-version": 4, "code-base-name": "quiz_game_frontend", "filename": "quiz_game_frontend/src/stores/dailyQuiz.ts", "revision_history": [{"80": "bbb0b61393d84ac73b04db2bb530fd274b4998f3"}]}