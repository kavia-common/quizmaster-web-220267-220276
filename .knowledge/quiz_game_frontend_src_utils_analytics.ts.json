{"is_source_file": true, "format": "TypeScript", "description": "This file defines TypeScript types, utility functions, and exported functions related to analytics tracking and calculation within a quiz or educational application. It includes type definitions for analytics metadata, score entries, category stats, and functions to calculate accuracy, average time, streaks, weak categories, and other performance metrics.", "external_files": [], "external_methods": [], "published": ["accuracyPercentage", "averageTimeMs", "longestStrike", "mostPlayedCategory", "computeCategoryBreakdown", "detectWeakCategories", "lifetimeStrikeBest", "aggregateRecentPerformance", "strikeForAnswers", "backfillAnalyticsFromScore", "ModeKey", "AnalyticsMeta", "ScoreEntryLite", "CategoryStats", "WeakCategory"], "classes": [], "methods": [{"name": "export function accuracyPercentage(correct: number, wrong: number, includeSkipped = false, skipp/ accuracyPercentage", "description": "Computes the accuracy percentage based on correct and wrong counts, optionally including skipped questions.", "scope": "", "scopeKind": ""}, {"name": "averageTimeMs", "description": "Calculates the average time in milliseconds for a set of durations, handling empty or null arrays."}, {"name": "longestStrike", "description": "Finds the longest consecutive streak of correct answers within a boolean array."}, {"name": "export function mostPlayedCategory(entries: Array<Pick<AnalyticsMeta, 'category'>>): string | nu/ mostPlayedCategory", "description": "Determines the most frequently played category from a list of analytics metadata entries.", "scope": "", "scopeKind": ""}, {"name": "export function computeCategoryBreakdown(history: AnalyticsMeta[]): CategoryStats[] { computeCategoryBreakdown", "description": "Aggregates multiple analytics entries to produce category-wise statistics including attempts, accuracy, and average time.", "scope": "", "scopeKind": ""}, {"name": "export function detectWeakCategories( detectWeakCategories", "description": "Identifies categories with low accuracy below a specified threshold and minimum attempts.", "scope": "", "scopeKind": ""}, {"name": "export function lifetimeStrikeBest(history: AnalyticsMeta[]): number { lifetimeStrikeBest", "description": "Finds the highest streak of correct answers across all quiz histories.", "scope": "", "scopeKind": ""}, {"name": "export function aggregateRecentPerformance(history: AnalyticsMeta[], limit = 10): Array<{ when: / aggregateRecentPerformance", "description": "Returns recent N quizzes with their respective accuracy and average time metrics.", "scope": "", "scopeKind": ""}, {"name": "export function strikeForAnswers(answers: Array<number | 'SKIPPED'>, questions: Array<{ answerIn/ strikeForAnswers", "description": "Calculates the longest streak of correct answers based on selected answers and questions.", "scope": "", "scopeKind": ""}, {"name": "export function backfillAnalyticsFromScore(entry: ScoreEntryLite): AnalyticsMeta { backfillAnalyticsFromScore", "description": "Creates an analytics record from an older score entry lacking detailed durations.", "scope": "", "scopeKind": ""}], "calls": ["clampPct", "accuracyPercentage", "averageTimeMs", "longestStrike", "mostPlayedCategory", "computeCategoryBreakdown", "detectWeakCategories", "lifetimeStrikeBest", "aggregateRecentPerformance", "strikeForAnswers", "backfillAnalyticsFromScore"], "search-terms": ["analytics", "category stats", "accuracy", "analytics meta", "score entry", "quiz performance", "performance metrics", "quiz analytics", "category breakdown", "weak categories"], "state": 2, "file_id": 24, "knowledge_revision": 66, "git_revision": "", "ctags": [{"_type": "tag", "name": "AnalyticsMeta", "path": "/home/kavia/workspace/code-generation/quizmaster-web-220267-220276/quiz_game_frontend/src/utils/analytics.ts", "pattern": "/^export type AnalyticsMeta = {$/", "language": "TypeScript", "kind": "alias"}, {"_type": "tag", "name": "CategoryStats", "path": "/home/kavia/workspace/code-generation/quizmaster-web-220267-220276/quiz_game_frontend/src/utils/analytics.ts", "pattern": "/^export type CategoryStats = {$/", "language": "TypeScript", "kind": "alias"}, {"_type": "tag", "name": "ModeKey", "path": "/home/kavia/workspace/code-generation/quizmaster-web-220267-220276/quiz_game_frontend/src/utils/analytics.ts", "pattern": "/^export type ModeKey = 'normal' | 'daily' | 'multiplayer'$/", "language": "TypeScript", "kind": "alias"}, {"_type": "tag", "name": "ScoreEntryLite", "path": "/home/kavia/workspace/code-generation/quizmaster-web-220267-220276/quiz_game_frontend/src/utils/analytics.ts", "pattern": "/^export type ScoreEntryLite = {$/", "language": "TypeScript", "kind": "alias"}, {"_type": "tag", "name": "WeakCategory", "path": "/home/kavia/workspace/code-generation/quizmaster-web-220267-220276/quiz_game_frontend/src/utils/analytics.ts", "pattern": "/^export type WeakCategory = {$/", "language": "TypeScript", "kind": "alias"}, {"_type": "tag", "name": "acc", "path": "/home/kavia/workspace/code-generation/quizmaster-web-220267-220276/quiz_game_frontend/src/utils/analytics.ts", "pattern": "/^    const acc = accuracyPercentage(agg.correct, agg.wrong)$/", "language": "TypeScript", "kind": "constant", "scope": "computeCategoryBreakdown", "scopeKind": "function"}, {"_type": "tag", "name": "accuracyPercentage", "path": "/home/kavia/workspace/code-generation/quizmaster-web-220267-220276/quiz_game_frontend/src/utils/analytics.ts", "pattern": "/^export function accuracyPercentage(correct: number, wrong: number, includeSkipped = false, skipp/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "agg", "path": "/home/kavia/workspace/code-generation/quizmaster-web-220267-220276/quiz_game_frontend/src/utils/analytics.ts", "pattern": "/^  for (const [category, agg] of map.entries()) {$/", "language": "TypeScript", "kind": "constant", "scope": "computeCategoryBreakdown", "scopeKind": "function"}, {"_type": "tag", "name": "aggregateRecentPerformance", "path": "/home/kavia/workspace/code-generation/quizmaster-web-220267-220276/quiz_game_frontend/src/utils/analytics.ts", "pattern": "/^export function aggregateRecentPerformance(history: AnalyticsMeta[], limit = 10): Array<{ when: /", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "avg", "path": "/home/kavia/workspace/code-generation/quizmaster-web-220267-220276/quiz_game_frontend/src/utils/analytics.ts", "pattern": "/^    const avg = averageTimeMs(agg.durations)$/", "language": "TypeScript", "kind": "constant", "scope": "computeCategoryBreakdown", "scopeKind": "function"}, {"_type": "tag", "name": "backfillAnalyticsFromScore", "path": "/home/kavia/workspace/code-generation/quizmaster-web-220267-220276/quiz_game_frontend/src/utils/analytics.ts", "pattern": "/^export function backfillAnalyticsFromScore(entry: ScoreEntryLite): AnalyticsMeta {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "c", "path": "/home/kavia/workspace/code-generation/quizmaster-web-220267-220276/quiz_game_frontend/src/utils/analytics.ts", "pattern": "/^    const c = String(e.category || '')$/", "language": "TypeScript", "kind": "constant", "scope": "mostPlayedCategory", "scopeKind": "function"}, {"_type": "tag", "name": "category", "path": "/home/kavia/workspace/code-generation/quizmaster-web-220267-220276/quiz_game_frontend/src/utils/analytics.ts", "pattern": "/^  for (const [category, agg] of map.entries()) {$/", "language": "TypeScript", "kind": "constant", "scope": "computeCategoryBreakdown", "scopeKind": "function"}, {"_type": "tag", "name": "clampPct", "path": "/home/kavia/workspace/code-generation/quizmaster-web-220267-220276/quiz_game_frontend/src/utils/analytics.ts", "pattern": "/^const clampPct = (n: number) => Math.max(0, Math.min(100, n))$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "computeCategoryBreakdown", "path": "/home/kavia/workspace/code-generation/quizmaster-web-220267-220276/quiz_game_frontend/src/utils/analytics.ts", "pattern": "/^export function computeCategoryBreakdown(history: AnalyticsMeta[]): CategoryStats[] {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "correct", "path": "/home/kavia/workspace/code-generation/quizmaster-web-220267-220276/quiz_game_frontend/src/utils/analytics.ts", "pattern": "/^  const denom = includeSkipped ? correct + wrong + skipped : correct + wrong$/", "language": "TypeScript", "kind": "constant", "scope": "accuracyPercentage", "scopeKind": "function"}, {"_type": "tag", "name": "count", "path": "/home/kavia/workspace/code-generation/quizmaster-web-220267-220276/quiz_game_frontend/src/utils/analytics.ts", "pattern": "/^  const count = durations.filter((d) => isFinite(d)).length$/", "language": "TypeScript", "kind": "constant", "scope": "accuracyPercentage", "scopeKind": "function"}, {"_type": "tag", "name": "cur", "path": "/home/kavia/workspace/code-generation/quizmaster-web-220267-220276/quiz_game_frontend/src/utils/analytics.ts", "pattern": "/^    const cur = map.get(k) || { attempts: 0, correct: 0, wrong: 0, skipped: 0, durations: [] }$/", "language": "TypeScript", "kind": "constant", "scope": "computeCategoryBreakdown", "scopeKind": "function"}, {"_type": "tag", "name": "d", "path": "/home/kavia/workspace/code-generation/quizmaster-web-220267-220276/quiz_game_frontend/src/utils/analytics.ts", "pattern": "/^      for (const d of h.durations) {$/", "language": "TypeScript", "kind": "constant", "scope": "computeCategoryBreakdown", "scopeKind": "function"}, {"_type": "tag", "name": "denom", "path": "/home/kavia/workspace/code-generation/quizmaster-web-220267-220276/quiz_game_frontend/src/utils/analytics.ts", "pattern": "/^  const denom = includeSkipped ? correct + wrong + skipped : correct + wrong$/", "language": "TypeScript", "kind": "constant", "scope": "accuracyPercentage", "scopeKind": "function"}, {"_type": "tag", "name": "detectWeakCategories", "path": "/home/kavia/workspace/code-generation/quizmaster-web-220267-220276/quiz_game_frontend/src/utils/analytics.ts", "pattern": "/^export function detectWeakCategories($/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "e", "path": "/home/kavia/workspace/code-generation/quizmaster-web-220267-220276/quiz_game_frontend/src/utils/analytics.ts", "pattern": "/^  for (const e of entries) {$/", "language": "TypeScript", "kind": "constant", "scope": "mostPlayedCategory", "scopeKind": "function"}, {"_type": "tag", "name": "flags", "path": "/home/kavia/workspace/code-generation/quizmaster-web-220267-220276/quiz_game_frontend/src/utils/analytics.ts", "pattern": "/^  const flags: boolean[] = []$/", "language": "TypeScript", "kind": "constant", "scope": "strikeForAnswers", "scopeKind": "function"}, {"_type": "tag", "name": "freq", "path": "/home/kavia/workspace/code-generation/quizmaster-web-220267-220276/quiz_game_frontend/src/utils/analytics.ts", "pattern": "/^  const freq = new Map<string, number>()$/", "language": "TypeScript", "kind": "constant", "scope": "mostPlayedCategory", "scopeKind": "function"}, {"_type": "tag", "name": "h", "path": "/home/kavia/workspace/code-generation/quizmaster-web-220267-220276/quiz_game_frontend/src/utils/analytics.ts", "pattern": "/^  for (const h of history) {$/", "language": "TypeScript", "kind": "constant", "scope": "computeCategoryBreakdown", "scopeKind": "function"}, {"_type": "tag", "name": "h", "path": "/home/kavia/workspace/code-generation/quizmaster-web-220267-220276/quiz_game_frontend/src/utils/analytics.ts", "pattern": "/^  for (const h of history) {$/", "language": "TypeScript", "kind": "constant", "scope": "lifetimeStrikeBest", "scopeKind": "function"}, {"_type": "tag", "name": "i", "path": "/home/kavia/workspace/code-generation/quizmaster-web-220267-220276/quiz_game_frontend/src/utils/analytics.ts", "pattern": "/^    const sel = answers[i]$/", "language": "TypeScript", "kind": "constant", "scope": "strikeForAnswers", "scopeKind": "function"}, {"_type": "tag", "name": "k", "path": "/home/kavia/workspace/code-generation/quizmaster-web-220267-220276/quiz_game_frontend/src/utils/analytics.ts", "pattern": "/^    const k = h.category$/", "language": "TypeScript", "kind": "constant", "scope": "computeCategoryBreakdown", "scopeKind": "function"}, {"_type": "tag", "name": "lifetimeStrikeBest", "path": "/home/kavia/workspace/code-generation/quizmaster-web-220267-220276/quiz_game_frontend/src/utils/analytics.ts", "pattern": "/^export function lifetimeStrikeBest(history: AnalyticsMeta[]): number {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "list", "path": "/home/kavia/workspace/code-generation/quizmaster-web-220267-220276/quiz_game_frontend/src/utils/analytics.ts", "pattern": "/^  const list = [...freq.entries()]$/", "language": "TypeScript", "kind": "constant", "scope": "mostPlayedCategory", "scopeKind": "function"}, {"_type": "tag", "name": "map", "path": "/home/kavia/workspace/code-generation/quizmaster-web-220267-220276/quiz_game_frontend/src/utils/analytics.ts", "pattern": "/^  const map = new Map<string, { attempts: number; correct: number; wrong: number; skipped: numbe/", "language": "TypeScript", "kind": "constant", "scope": "computeCategoryBreakdown", "scopeKind": "function"}, {"_type": "tag", "name": "min", "path": "/home/kavia/workspace/code-generation/quizmaster-web-220267-220276/quiz_game_frontend/src/utils/analytics.ts", "pattern": "/^  const min = Math.max(0, opts?.minAttempts ?? 5)$/", "language": "TypeScript", "kind": "constant", "scope": "detectWeakCategories", "scopeKind": "function"}, {"_type": "tag", "name": "mostPlayedCategory", "path": "/home/kavia/workspace/code-generation/quizmaster-web-220267-220276/quiz_game_frontend/src/utils/analytics.ts", "pattern": "/^export function mostPlayedCategory(entries: Array<Pick<AnalyticsMeta, 'category'>>): string | nu/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "out", "path": "/home/kavia/workspace/code-generation/quizmaster-web-220267-220276/quiz_game_frontend/src/utils/analytics.ts", "pattern": "/^  const out: CategoryStats[] = []$/", "language": "TypeScript", "kind": "constant", "scope": "computeCategoryBreakdown", "scopeKind": "function"}, {"_type": "tag", "name": "s", "path": "/home/kavia/workspace/code-generation/quizmaster-web-220267-220276/quiz_game_frontend/src/utils/analytics.ts", "pattern": "/^    const s = h.longestCorrectStreak ?? 0$/", "language": "TypeScript", "kind": "constant", "scope": "lifetimeStrikeBest", "scopeKind": "function"}, {"_type": "tag", "name": "sel", "path": "/home/kavia/workspace/code-generation/quizmaster-web-220267-220276/quiz_game_frontend/src/utils/analytics.ts", "pattern": "/^    const sel = answers[i]$/", "language": "TypeScript", "kind": "constant", "scope": "strikeForAnswers", "scopeKind": "function"}, {"_type": "tag", "name": "slice", "path": "/home/kavia/workspace/code-generation/quizmaster-web-220267-220276/quiz_game_frontend/src/utils/analytics.ts", "pattern": "/^  const slice = sorted.slice(0, Math.max(0, limit))$/", "language": "TypeScript", "kind": "constant", "scope": "aggregateRecentPerformance", "scopeKind": "function"}, {"_type": "tag", "name": "sorted", "path": "/home/kavia/workspace/code-generation/quizmaster-web-220267-220276/quiz_game_frontend/src/utils/analytics.ts", "pattern": "/^  const sorted = [...history].sort((a, b) => (b.completedAt || 0) - (a.completedAt || 0))$/", "language": "TypeScript", "kind": "constant", "scope": "aggregateRecentPerformance", "scopeKind": "function"}, {"_type": "tag", "name": "strikeForAnswers", "path": "/home/kavia/workspace/code-generation/quizmaster-web-220267-220276/quiz_game_frontend/src/utils/analytics.ts", "pattern": "/^export function strikeForAnswers(answers: Array<number | 'SKIPPED'>, questions: Array<{ answerIn/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "threshold", "path": "/home/kavia/workspace/code-generation/quizmaster-web-220267-220276/quiz_game_frontend/src/utils/analytics.ts", "pattern": "/^  const threshold = Math.max(0, Math.min(100, opts?.thresholdPct ?? 60))$/", "language": "TypeScript", "kind": "constant", "scope": "detectWeakCategories", "scopeKind": "function"}, {"_type": "tag", "name": "weak", "path": "/home/kavia/workspace/code-generation/quizmaster-web-220267-220276/quiz_game_frontend/src/utils/analytics.ts", "pattern": "/^  const weak = breakdown$/", "language": "TypeScript", "kind": "constant", "scope": "detectWeakCategories", "scopeKind": "function"}, {"_type": "tag", "name": "wrong", "path": "/home/kavia/workspace/code-generation/quizmaster-web-220267-220276/quiz_game_frontend/src/utils/analytics.ts", "pattern": "/^  const wrong = Math.max(0, entry.total - entry.score)$/", "language": "TypeScript", "kind": "constant", "scope": "backfillAnalyticsFromScore", "scopeKind": "function"}], "hash": "09af23e6347b495a936cf6a38c7efc30", "format-version": 4, "code-base-name": "quiz_game_frontend", "filename": "quiz_game_frontend/src/utils/analytics.ts", "revision_history": [{"66": ""}]}